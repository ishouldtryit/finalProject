<?xml version="1.0" encoding="UTF-8"?>
<!-- ↑ XML 헤더 반드시 첫번째 줄에 위치 -->

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    

    <mapper namespace="approval">
    
    	<select id="selectList" resultType="ApprovalDto">
    		select * from approval order by draft_no
    	</select>
    	
    	<select id="selectOne" resultType="ApprovalDto">
    		select * from approval where draft_no=#{draftNo}
    	</select>
    	
    	<insert id="insert" >
    		insert into approval( 
    		draft_no,draft_title,draft_content,
    		drafter_id, first_approver
    		) 
    		values(
    		approval_seq.nextval,#{draftTitle},#{draftContent},
    		#{drafterId}, #{firstApprover}
    		)
    	</insert>
    	
    	<select id="search" resultType="ApprovalDto">
    		select * from approval where instr(${column}, #{keyword}) >0 order by ${column} asc
    		
    	</select>

		<update id="editAllInOne">
			update approval
			<set>
				<if test="draftTitle!=null">
					draft_title=#{draftTitle},
				</if>
				<if test="draftContent!=null">
					draft_content=#{draftContent},
				</if>
			</set>
			where draft_no=#{draftNo}
		</update>    	
		
		<delete id="remove">
			delete approval where draft_no = #{draftNo}
		</delete>
    	
    	
    </mapper>